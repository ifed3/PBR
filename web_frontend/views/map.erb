<head>
	<script type="text/javascript" src="/leaflet.js"></script>
	<script type="text/javascript" src="/polyline.js"></script>
	<link rel="stylesheet" href="/leaflet.css" />
	<script type="text/javascript">
	  window.onload = function () {
	  	Window.map = L.map('map').setView([41.8850300,-87.6250500], 15);
	  	L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    		attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
			}).addTo(Window.map);
			console.log('<%= @waypoints %>');
			var points = <%= @waypoints %>;
	  	var pointlist = points.map(function(point) {return new L.LatLng(point[0], point[1])});
	  	var poly = new L.Polyline(pointlist, {
    		color: 'red',
    		weight: 3,
    		opacity: 0.5,
    		smoothFactor: 1
    	});
    	poly.addTo(Window.map);
	  };
	</script>
</head>
<body>
	<div id="map">
		<style>
			#map {
	    	width:100%;
	    	height:100%;
			}
	</style>
	</div>
</body>